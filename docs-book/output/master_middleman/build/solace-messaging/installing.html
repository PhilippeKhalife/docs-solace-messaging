<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300italic,400italic,400,600' rel='stylesheet' type='text/css'>
  <!-- Use title if it's in the page YAML frontmatter -->
  <title>
      Installing and Configuring Solace Messaging for Pivotal Cloud Foundry |
    
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="/stylesheets/all.css" rel="stylesheet" media="screen, print" />
  <link href="/stylesheets/print.css" rel="stylesheet" media="print" />
  <link href='/images/favicon.ico' rel='shortcut icon'>

  <script src="/javascripts/all.js"></script>
  <script>
//Global Google Search
(function() {
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//www.google.com/cse/cse.js?cx=' + '';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
})();
</script>

<script type="text/javascript">
  if (window.location.host === 'hello') {
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', '']);
    _gaq.push(['_setDomainName', '']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  }
</script>

<script type="text/javascript">
  var blackList = ['acceptance'];

  blackList.forEach(function(blackListedEnv) {
    if (document.URL.indexOf(blackListedEnv) > -1 && blackListedEnv != "") {
      $('head').append('<meta name="hashtag" content="PivotalMoment">');
    }
  });
</script>

<!-- CrazyEgg Tracking Script -->
<script type="text/javascript">
  setTimeout(function() {
    var a = document.createElement("script");
    var b = document.getElementsByTagName("script")[0];
    a.src = document.location.protocol + "//script.crazyegg.com/pages/scripts/0020/8294.js?" + Math.floor(new Date().getTime() / 3600000);
    a.async = true;
    a.type = "text/javascript";
    b.parentNode.insertBefore(a, b)
  }, 1);
</script>

<script type="text/javascript">
  (function() {
    var didInit = false;

    function initMunchkin() {
      if (didInit === false) {
        didInit = true;
        Munchkin.init('625-IUJ-009');
      }
    }

    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
        initMunchkin();
      }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
  })();
</script>

</head>

<body class="solace-messaging solace-messaging_installing has-subnav">

<div class="viewport">
  <div class='wrap'>
    <script type="text/javascript">
      document.domain = "";
    </script>

       
    <header class="header header-layout">
      <h1 class="logo">
        <a href="/">Default Book Title</a>
      </h1>
      
      <div class="header-links js-bar-links">
        <div class="btn-menu" data-behavior="MenuMobile"></div>
        
        <div class="header-item">
          
        </div>
        <!--Default search-->
<!--If book needs something different, add a book-search partial to the book's layouts folder-->
<div class="header-item searchbar js-searchbar">
  <a class="search-icon" data-behavior="Search"></a>
  <div class="search-input">
    <div class="search-input-inner" id="docs-search">
        <gcse:searchbox></gcse:searchbox>
    </div>
  </div>
</div>

      </div>
    </header>



    <div class="container">

      <!--googleoff: index-->
      <div id="sub-nav" class="deepnav-content js-deep-nav js-sidenav nav-container" role="navigation">
  <a class="sidenav-title" data-behavior="SubMenuMobile">
    Doc Index
  </a>
  <div class="nav-content">
    <ul class="menu">
      <li>
        <span class="topic">
          <a id='home-nav-link' href="/solace-messaging/index.html">Solace Messaging for PCF Overview</a>
        </span>
      </li>
      <li>
          <span><a href="/solace-messaging/installing.html">Tile Installation and Configuration</a></span>
      </li>
      <li>
          <span><a href="/solace-messaging/service-instances.html">Service Instances and Bindings</a></span>
      </li>
      <li>
          <span><a href="/solace-messaging/credentials.html">Solace Messaging Credentials</a></span>
      </li>
      <li>
          <span><a href="/solace-messaging/managing.html">Message VPN Management</a></span>
      </li>
      <li>
          <span><a href="/solace-messaging/release-notes.html">Release Notes</a></span>
      </li>

     </ul>
    </div>
</div>
      <!--googleon: index-->

      <main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container" >
    Installing and Configuring Solace Messaging for Pivotal Cloud Foundry
  </h1>

          <div id="js-quick-links" >
            <div class="quick-links"><ul>
<li><a href="#resource-reqs">Review Resource Requirements</a></li>
<li><a href="#prereqs">Prerequisites</a></li>
<li><a href="#install">Install Solace Messaging for PCF</a></li>
<li><a href="#configure">Configure Solace Messaging for PCF</a></li>
</ul></div>
          </div>
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>
        <p>This topic describes how to install and configure Solace Messaging for Pivotal Cloud Foundry (PCF). Before installing Solace Messaging for PCF, you must complete the <a href="/solace-messaging/#prereqs">prerequisites</a>.</p>

<h2><a id='resource-reqs'></a> Review Resource Requirements</h2>

<p>Review the resource and IP requirements for installing the Solace Messaging for PCF tile.</p>

<table border="1" class="nice">
    <tr>
        <th>Product</th>
        <th>Resource</th>
        <th>Instances</th>
        <th>CPU</th>
        <th>Ram (MB)</th>
        <th>Ephemeral (MB)</th>
        <th>Persistent (MB)</th>
        <th>Static IP</th>
        <th>Dynamic IP</th>
    </tr>
  <tr>
    <td>Solace Messaging for PCF</td>
    <td>Solace Service Broker</td>
    <td>1</td>
    <td>1</td>
    <td>1024</td>
    <td>1024</td>
    <td>0</td>
    <td>0</td>
    <td>1</td>
  </tr>
  <tr>
    <td>Solace Messaging for PCF</td>
    <td>Large-VMR</td>
    <td>1<a href="#tableNote">*</a></td>
    <td>4</td>
    <td>12288</td>
    <td>10240</td>
    <td>204800<a href="#tableNote">*</a></td>
    <td>1</td>
    <td>0</td>
  </tr>
  <tr>
    <td>Solace Messaging for PCF</td>
    <td>Medium-VMR</td>
    <td>1<a href="#tableNote">*</a></td>
    <td>2</td>
    <td>4096</td>
    <td>10240</td>
    <td>51200<a href="#tableNote">*</a></td>
    <td>1</td>
    <td>0</td>
  </tr>
  <tr>
    <td>Solace Messaging for PCF</td>
    <td>Community-VMR</td>
    <td>1<a href="#tableNote">*</a></td>
    <td>4</td>
    <td>4096</td>
    <td>10240</td>
    <td>10240<a href="#tableNote">*</a></td>
    <td>1</td>
    <td>0</td>
  </tr>
</table>

<p id="tableNote" class="note"><strong>* Note</strong>: You can modify the number of Instances and Persistent disk size when configuring the Solace Messaging for PCF tile. Solace recommends not changing the other parameters. For more information, see the <a href="#configure">Configure Solace Messaging for PCF</a> tile below.</p> 

<h2><a id='prereqs'></a>Prerequisites</h2>

<p>The Solace Messaging for PCF Service Broker requires the following:</p>

<ul>
<li>Java buildpack 3.7.1 or higher.</li>
<li>The MySQL for PCF tile. When configuring the tile, set the maximum storage in the <strong>Service Plan</strong> section to 100 MB. See the MySQL for PCF <a href="http://docs.pivotal.io/p-mysql/index.html">documentation</a> for more information on how to install and configure the tile.</li>
</ul>

<h2><a id='install'></a> Install Solace Messaging for PCF</h2>

<p>To install Solace Messaging for PCF, perform the following steps:</p>

<ol>
<li>Download the product file from Pivotal Network.</li>
<li>Upload the product file on the Ops Manager <strong>Installation Dashboard</strong>.</li>
<li>Click <strong>Add</strong> next to the uploaded Solace Messaging tile in the Ops Manager <strong>Available Products</strong> view to add it to your staging area.</li>
<li>Click the <strong>Solace Messaging</strong> tile.</li>
<li>Follow the steps in the section below to configure the tile.</li>
</ol>

<h2><a id='configure'></a> Configure Solace Messaging for PCF</h2>

<p>To configure Solace Messaging for PCF, perform the following steps:</p>

<ol>
<li>From the <strong>Settings</strong> tab of the Solace Messaging tile, click <strong>Assign AZs and Networks</strong>.
<img src="images/Network_Config_Form.png" /></li>
<li>Under <strong>Network</strong> choose the network where Solace Messaging should run.</li>
<li>Click <strong>Save</strong>.</li>
<li>Click <strong>Message Routing Config</strong>.
<img src="images/VMR_Config_Form.png" /> </li>
<li><p>Under <strong>Admin user password</strong>, pick a password for the Virtual Message Routers <code>admin</code> user.</p>

<p><img src="images/admin_password_VMR_Config.png" /></p></li>
<li><p>Under <strong>Support user password</strong>, pick a password for the Virtual Message Routers <code>support</code> user.</p>

<p><img src="images/support_password_VMR_Config.png" /></p></li>
<li><p>Under <strong>Starting Port</strong>, enter a port where the messaging services on the VMRs (e.g. MQTT, REST, SMF, etc) will start listening from. For example &lsquo;7000&rsquo;.  The exact port numbers chosen for each service will be based on this starting port and specified in the <code>VCAP_SERVICES</code> enviornment variable passed to applications. See <a href="/solace-messaging/credentials.html#example">Example Environment Variable</a> for an example.</p>

<p><img src="images/Starting_Port_VMR_Config.png" /></p></li>
<li><p>Click <strong>Save</strong>.</p></li>
<li><p>(Optional) Click <strong>TLS Config</strong>. By configuring TLS you allow messaging between applications and the Solace VMRs to be encrypted. Applications requiring encryption would then need to use the TLS-specific URLs passed in the <code>VCAP_SERVICES</code> environment variable. See <a href="/solace-messaging/credentials.html#example">Example Environment Variable</a> for more information on the <code>VCAP_SERVICES</code> environment variable. If TLS is not configured the TLS specific URLs will continue to be passed in the <code>VCAP_SERVICES</code> environment variable but will fail to connect to a VMR if used.</p>

<p><img src="images/TLS_Config_Form.png" /></p></li>
<li><p>(Optional) Configure <strong>Message Router&rsquo;s RSA certificate (Server Certificate)</strong> either by pasting in a certificate and private key in PEM format or asking one to be generated by pressing <strong>Generate RSA Certificate</strong></p></li>
</ol>

<p class="note"><strong>Note</strong>: The server certifcate configured will be used by all Solace VMRs deployed and as such all VMRs deployed in a PCF instances will have the same identification.</p>

<p class="note"><strong>Note 2</strong>: Communication between the Solace Messaging Service Broker and VMRs is also encrypted if a TLS certificate is configured. The Service Broker uses the Container Certificate Trust Store Framework to validate the server certificate returned by VMRs. So if the framework is not operational when the tile is deployed the Service Broker will be unable to validate server certificates sent by the VMRs and the tile will fail to deploy. In development environments it may be acceptable to not require server certificate validation in which case the **Disable RSA Server Certificate validation on the Service Broker (For development only)** checkbox can be selected. This checbox should never be selected in production deployments, instead the framework should be made operational. See [Configuring Ops Manager Director for VMware vSphre](https://docs.pivotal.io/pivotalcf/1-8/customizing/vsphere-config.html#security-config) for an example of how to configure the Container Certificate Trust Store Framework</p>

<ol>
<li><p>(Optional) Click <strong>Save</strong>.</p></li>
<li><p>Click <strong>Service Access</strong></p>

<p><img src="images/ServiceAccess_Config_Form.png" /></p></li>
<li><p>Enable the <strong>Enable global access to plans of service solace_messaging</strong> option.
<p class="note"><strong>Note</strong>: To control access to Solace Messaging&rsquo;s service plans on a case-by-case basis, leave this option unchecked.</p></p></li>
<li><p>Click <strong>Save</strong>.</p></li>
<li><p>Click <strong>Resource Config</strong>.</p></li>
<li><p>If necessary, use the drop-down menus to increase the number of instances of the <code>Large-VMR</code>, <code>Medium-VMR</code> and <code>Community-VMR</code> jobs. This controls the number of VMR instances of each type that are statically created when the tile is deployed. VMRs are then dynamically bound to/unbound from applications on demand post-deployment. <code>Large-VMR</code> job instances are used by service instances created from the <code>large</code> service plan. <code>Medium-VMR</code> job instances are used by service instances created from the <code>shared</code> service plan. And &#39;Community-VMR&rsquo; job instances are used by service instances created from the <code>shared</code> service plan. The number of job instances can be increased after the tile is deployed without impacting already bound applications however reducing the number of instances post-deployment can result in application failure and total message loss. The size of the persistent disk used by VMR instances can also be changed both before and after deployment. Unlike increasing the number of job instances post-deployment, increasing the size of the persistent disks post-deployment will impact the service of already bound applications however messages will not be lost. Reducing the size of the persistent disk post-deployment is not recommended and can result in message loss, inoperable VMRs, and/or undefined behaviors. Solace recommends keeping the default values for <strong>VM Type</strong>.
<p class="note"><strong>Note</strong>: The maximum number of service instances that can concurrently exist for the <code>shared</code> service plan is equal to five times the number of <code>Medium-VMR</code> instances. The maximum number of service instances that can concurrently exist for the <code>large</code> and <code>community</code> service plans is equal to the number of <code>Large-VMR</code> and <code>Community-VMR</code> instances respectively.</p>
<img src="images/Resource_Config.png" /></p></li>
<li><p>Click <strong>Save</strong>.</p></li>
<li><p>Click <strong>Installation Dashboard</strong> at the top left corner of the screen to leave the tile configuration and go back to dashboard.</p></li>
<li><p>Click <strong>Apply Changes</strong> to deploy the tile.</p></li>
<li><p>After the tile has deployed, see the <a href="/solace-messaging/service-instances.html">Creating and Binding Solace Messaging Service Instances</a> topic for information about creating instances of the Solace Messaging service and binding them to applications.</p></li>
</ol>

          <gcse:searchresults></gcse:searchresults>
<a id='repo-link' href='http://github.com/docs-content/tree/staging/installing.html.md.erb'>View the source for this page in GitHub</a>

      </main>
    </div>
  </div>
</div>

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
  <a href='http://pivotal.io/privacy-policy'>Privacy Policy</a> | 
  <a href='http://pivotal.io/terms-of-use'>Terms of Use</a><br/>
  <a href='/'>Pivotal Documentation</a>
  &copy; 2016 <a href='http://pivotal.io'>Pivotal Software</a>, Inc. All Rights Reserved.
</div>
<div class="support">
  Need help? <a href="" target="_blank">Visit Support</a>
</div>

  </footer>
</div><!--end of container-->

</body>
</html>
